<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Edgecase</title>
    <link rel="stylesheet" href="sidepanel.css" />
  </head>
  <body>
    <main id="app">
      <header class="top card">
        <div>
          <p class="eyebrow">Interview Coach</p>
          <h1>Edgecase</h1>
          <p id="statusText" class="status">Detecting problem context...</p>
        </div>
        <button id="refreshContextButton" class="ghost" title="Re-extract this page">Refresh</button>
      </header>

      <section id="problemCard" class="card">
        <h2 id="problemTitle">No problem detected</h2>
        <p id="problemMeta"></p>
        <p id="problemPreview"></p>
      </section>

      <section class="card settings">
        <div class="settings-head">
          <h3>Settings</h3>
          <span class="hint">Saved locally in this browser.</span>
        </div>

        <form id="settingsForm">
          <label>
            Provider
            <select id="provider" name="provider">
              <option value="openai">OpenAI</option>
              <option value="anthropic">Anthropic</option>
              <option value="gemini">Gemini</option>
            </select>
          </label>

          <label>
            Model
            <input id="model" name="model" type="text" placeholder="gpt-4o-mini" required />
          </label>

          <label>
            API Key
            <input id="apiKey" name="apiKey" type="password" placeholder="sk-..." />
          </label>

          <div class="grid-2">
            <label>
              Temperature
              <input id="temperature" name="temperature" type="number" min="0" max="1" step="0.1" />
            </label>

            <label>
              Max tokens
              <input id="maxTokens" name="maxTokens" type="number" min="100" max="4000" step="50" />
            </label>
          </div>

          <div class="grid-2">
            <label>
              Coaching style
              <select id="coachingStyle" name="coachingStyle">
                <option value="interviewer">Interviewer</option>
                <option value="collaborative">Collaborative</option>
                <option value="socratic">Socratic</option>
              </select>
            </label>

            <label>
              Response style
              <select id="responseStyle" name="responseStyle">
                <option value="balanced">Balanced</option>
                <option value="concise">Concise</option>
                <option value="detailed">Detailed</option>
              </select>
            </label>
          </div>

          <label>
            System prompt override
            <textarea
              id="systemPromptOverride"
              name="systemPromptOverride"
              rows="3"
              placeholder="Optional custom instructions added to the base coaching prompt."></textarea>
          </label>

          <label class="inline">
            <input id="autoOpenPanel" name="autoOpenPanel" type="checkbox" />
            Auto-open panel on supported problem pages
          </label>

          <button type="submit">Save settings</button>
        </form>
      </section>

      <section class="quick-actions">
        <button data-prompt="Give me one small hint only. Do not reveal the full approach.">Small hint</button>
        <button data-prompt="What data structure should I use and why? Give a short hint first.">Right DSA</button>
        <button data-prompt="What is the right approach pattern for this problem? Keep it high-level.">Right approach</button>
        <button data-prompt="Give me edge cases I should test before coding.">Edge cases</button>
        <button data-prompt="How should I reason about time and space complexity here?">Complexity</button>
        <button data-prompt="I explicitly want the complete solution now, including algorithm explanation and code.">Full solution</button>
      </section>

      <section id="chat" class="chat" aria-live="polite"></section>

      <form id="composer" class="composer">
        <textarea
          id="messageInput"
          rows="3"
          placeholder="Ask for nudges, validate your approach, or request a full solution..."></textarea>
        <div class="composer-actions">
          <button type="button" id="clearChatButton" class="ghost">Clear</button>
          <div class="composer-actions-right">
            <button type="button" id="stopButton" class="danger ghost" hidden>Stop</button>
            <button type="submit" id="sendButton">Send</button>
          </div>
        </div>
      </form>
    </main>

    <script src="sidepanel.js"></script>
  </body>
</html>
